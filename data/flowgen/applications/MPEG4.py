import AppComposer

# Make Application
MPEG4 = AppComposer.Application(AppName = "MPEG4", StartTime = 0, StopTime = 0)

# Make Threads
VU = AppComposer.Thread(ThreadName = "VU")
AU = AppComposer.Thread(ThreadName = "AU")
MedCPU = AppComposer.Thread(ThreadName = "MedCPU")
RAST = AppComposer.Thread(ThreadName = "RAST")
SDRAM = AppComposer.Thread(ThreadName = "SDRAM")
SRAM1 = AppComposer.Thread(ThreadName = "SRAM1")
SRAM2 = AppComposer.Thread(ThreadName = "SRAM2")
IDCT = AppComposer.Thread(ThreadName = "IDCT")
ADSP = AppComposer.Thread(ThreadName = "ADSP")
UpSamp = AppComposer.Thread(ThreadName = "UpSamp")
BAB = AppComposer.Thread(ThreadName = "BAB")
RISC = AppComposer.Thread(ThreadName = "RISC")

# Add Threads to applications
MPEG4.addThread(VU)
MPEG4.addThread(AU)
MPEG4.addThread(MedCPU)
MPEG4.addThread(RAST)
MPEG4.addThread(SDRAM)
MPEG4.addThread(SRAM1)
MPEG4.addThread(SRAM2)
MPEG4.addThread(IDCT)
MPEG4.addThread(ADSP)
MPEG4.addThread(UpSamp)
MPEG4.addThread(BAB)
MPEG4.addThread(RISC)

# Add Flows to Threads (Bandwidth must be in Megabytes/second)
VU.addFlow(AppComposer.Flow(TargetThread = SDRAM, Bandwidth = 95))
AU.addFlow(AppComposer.Flow(TargetThread = SDRAM, Bandwidth = 0.25))
MedCPU.addFlow(AppComposer.Flow(TargetThread = SDRAM, Bandwidth = 30))
MedCPU.addFlow(AppComposer.Flow(TargetThread = SRAM1, Bandwidth = 20))
RAST.addFlow(AppComposer.Flow(TargetThread = SDRAM, Bandwidth = 300))
RAST.addFlow(AppComposer.Flow(TargetThread = SRAM1, Bandwidth = 20))
SDRAM.addFlow(AppComposer.Flow(TargetThread = VU, Bandwidth = 95))
SDRAM.addFlow(AppComposer.Flow(TargetThread = AU, Bandwidth = 0.25))
SDRAM.addFlow(AppComposer.Flow(TargetThread = MedCPU, Bandwidth = 30))
SDRAM.addFlow(AppComposer.Flow(TargetThread = RAST, Bandwidth = 300))
SDRAM.addFlow(AppComposer.Flow(TargetThread = ADSP, Bandwidth = 0.25))
SDRAM.addFlow(AppComposer.Flow(TargetThread = UpSamp, Bandwidth = 455))
SDRAM.addFlow(AppComposer.Flow(TargetThread = BAB, Bandwidth = 16))
SRAM1.addFlow(AppComposer.Flow(TargetThread = MedCPU, Bandwidth = 20))
SRAM1.addFlow(AppComposer.Flow(TargetThread = RAST, Bandwidth = 20))
SRAM2.addFlow(AppComposer.Flow(TargetThread = IDCT, Bandwidth = 125))
SRAM2.addFlow(AppComposer.Flow(TargetThread = UpSamp, Bandwidth = 335))
SRAM2.addFlow(AppComposer.Flow(TargetThread = BAB, Bandwidth = 86.5))
SRAM2.addFlow(AppComposer.Flow(TargetThread = RISC, Bandwidth = 250))
IDCT.addFlow(AppComposer.Flow(TargetThread = SRAM2, Bandwidth = 125))
ADSP.addFlow(AppComposer.Flow(TargetThread = SDRAM, Bandwidth = 0.25))
UpSamp.addFlow(AppComposer.Flow(TargetThread = SDRAM, Bandwidth = 455))
UpSamp.addFlow(AppComposer.Flow(TargetThread = SRAM2, Bandwidth = 335))
BAB.addFlow(AppComposer.Flow(TargetThread = SDRAM, Bandwidth = 16))
BAB.addFlow(AppComposer.Flow(TargetThread = SRAM2, Bandwidth = 86.5))
RISC.addFlow(AppComposer.Flow(TargetThread = SRAM2, Bandwidth = 250))

# Save App to JSON
MPEG4.toJSON(SaveToFile = True, FileName = "MPEG4")
